---
import { prettyCategory } from "../lib/topics";
const { topics = [] } = Astro.props;
---

<aside>
  <!-- Mobile: collapsible (only) -->
  <div class="lg:hidden rounded-2xl border border-gray-200 bg-white p-5">
    <details class="group">
      <summary class="cursor-pointer list-none flex items-center justify-between">
        <div>
          <h3 class="text-sm font-semibold text-gray-900">Topics</h3>
          <p class="mt-1 text-xs text-gray-500">From the agent’s topic selection</p>
        </div>
        <span class="text-xs font-medium text-blue-600 group-open:hidden">Show</span>
        <span class="text-xs font-medium text-blue-600 hidden group-open:inline">Hide</span>
      </summary>

      <div class="mt-4 space-y-2">
        {topics.map((t) => (
          <a
            href={`/posts?category=${t}`}
            class="group flex items-center justify-between rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-800 hover:bg-white hover:border-gray-300"
          >
            <span class="font-medium">{prettyCategory(t)}</span>
            <span class="text-xs text-gray-400 group-hover:text-gray-500">→</span>
          </a>
        ))}
      </div>

      <div class="mt-5 rounded-xl bg-gray-50 p-3 text-xs text-gray-600">
        Tip: reorder lines in <code class="rounded bg-white px-1.5 py-0.5">topic_selection.txt</code>.
      </div>
    </details>
  </div>

  <!-- Desktop: sticky panel (only) -->
  <div class="hidden lg:block sticky top-6">
    <div class="rounded-2xl border border-gray-200 bg-white p-5">
      <div class="flex items-center justify-between">
        <h3 class="text-sm font-semibold text-gray-900">Topics</h3>
        <a href="/posts" class="text-xs font-medium text-blue-600 hover:text-blue-700">View all</a>
      </div>

      <p class="mt-1 text-xs text-gray-500">From the agent’s topic selection</p>

      <div class="mt-4 space-y-2">
        {topics.map((t) => (
          <a
            href={`/posts?category=${t}`}
            class="group flex items-center justify-between rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-800 hover:bg-white hover:border-gray-300"
          >
            <span class="font-medium">{prettyCategory(t)}</span>
            <span class="text-xs text-gray-400 group-hover:text-gray-500">→</span>
          </a>
        ))}
      </div>

      <div class="mt-5 rounded-xl bg-gray-50 p-3 text-xs text-gray-600">
        Tip: add or reorder lines in <code class="rounded bg-white px-1.5 py-0.5">topic_selection.txt</code>.
      </div>
    </div>
  </div>
</aside>
